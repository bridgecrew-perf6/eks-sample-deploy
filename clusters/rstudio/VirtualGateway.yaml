# ---
# apiVersion: appmesh.k8s.aws/v1beta2
# kind: VirtualGateway
# metadata:
#   name: rstudio-ingress-gw
#   namespace: rstudio
# spec:
#   namespaceSelector:
#     matchLabels:
#       gateway: rstudio-gw
#   podSelector:
#     matchLabels:
#       app: rstudio
#   listeners:
#     - portMapping:
#         port: 80
#         protocol: http
#   logging:
#     accessLog:
#       file:
#         path: /dev/stdout
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: rstudio-gateway
#   namespace: rstudio
#   annotations:
#     service.beta.kubernetes.io/aws-load-balancer-type: "alb"
#     service.beta.kubernetes.io/aws-load-balancer-internal: (http://service.beta.kubernetes.io/aws-load-balancer-internal:) "true"
# spec:
#   type: LoadBalancer
#   ports:
#     - port: 80
#       targetPort: 8088
#       name: http
#   selector:
#     app: rstudio-gw
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: ingress-gw
#   namespace: rstudio
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: rstudio-gw
#   template:
#     metadata:
#       labels:
#         app: rstudio-gw
#     spec:
#       serviceAccountName: prodcatalog-envoy-proxies
#       securityContext:
#         fsGroup: 65534
#       containers:
#         - name: envoy
#           image: 602401143452.dkr.ecr.us-east-2.amazonaws.com/aws-appmesh-envoy:v1.17.2.0
#           ports:
#             - containerPort: 8088
# ---

# # apiVersion: appmesh.k8s.aws/v1beta2
# # kind: GatewayRoute
# # metadata:
# #   name: gateway-route-rstudio
# #   namespace: rstudio
# # spec:
# #   httpRoute:
# #     match:
# #       prefix: "/"
# #     action:
# #       target:
# #         virtualService:
# #           virtualServiceRef:
# #             name: rstudio-vs
# # ---